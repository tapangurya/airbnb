<!DOCTYPE html>
<html lang="en">
  <%- include("../partials/head") %>
  <body class="min-h-screen flex flex-col bg-gray-100">
    <!-- Navbar -->
    <%- include("../partials/nav") %>

    <!-- Main Content -->
    <main class="p-6">
      <h1 class="text-green-600 text-3xl font-bold text-center mb-6">
        Welcome to Airbnb
      </h1>

      <!-- Cards Grid -->
      <div
        class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"
      >
        <% if (registeredHomes.length === 0) { %>
        <p class="text-center col-span-full text-gray-600">
          No homes registered yet.
        </p>
        <% } %> <% registeredHomes.forEach(home => { %>
        <div
          class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition"
        >
          <!-- FULL IMAGE -->
          <a href="/home/<%= home._id %>">
            <img
              src="<%= home.imageUrl %>"
              alt="Home Image"
              class="w-full h-48 object-cover"
            />
          </a>
          <div class="p-3">
            <!-- Home Name -->
            <h3 class="text-base font-semibold text-gray-800 truncate">
              <%= home.houseName %>
            </h3>

            <!-- Location + Rating -->
            <div
              class="flex items-center justify-between mt-1 text-xs text-gray-600"
            >
              <span class="flex items-center gap-1 truncate">
                üìç <%= home.location %>
              </span>

              <div class="flex items-center gap-0.5">
                <% for (let i = 1; i <= 5; i++) { %> <% if (i <= home.rating) {
                %>
                <svg
                  class="w-3.5 h-3.5 text-yellow-400 fill-current"
                  viewBox="0 0 20 20"
                >
                  <path
                    d="M10 15l-5.878 3.09L5.82 11.545.941 7.41l6.09-.885L10 1l2.969 5.525 6.09.885-4.879 4.136 1.699 6.545z"
                  />
                </svg>
                <% } else { %>
                <svg
                  class="w-3.5 h-3.5 text-gray-300 fill-current"
                  viewBox="0 0 20 20"
                >
                  <path
                    d="M10 15l-5.878 3.09L5.82 11.545.941 7.41l6.09-.885L10 1l2.969 5.525 6.09.885-4.879 4.136 1.699 6.545z"
                  />
                </svg>
                <% } %> <% } %>
              </div>
            </div>

            <!-- Price + Favorite -->
            <!-- Price + Favorite -->
            <div class="flex items-center justify-between mt-2">
              <p class="text-amber-600 font-semibold text-sm">
                ‚Çπ <%= home.price %> / night
              </p>
              <%- include('../partials/Favorite', { home, favourites }) %>
            </div>

            <!-- Book Now Button -->
            <a
              href="/book-home/<%= home._id %>"
              class="block w-full mt-3 text-center px-4 py-2 text-sm font-medium text-white bg-emerald-600 rounded-lg hover:bg-emerald-700 transition"
            >
              Book Now
            </a>
          </div>
        </div>
        <% }) %>
      </div>
    </main>
  </body>
</html>
